{"remainingRequest":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/babel-loader/lib/index.js!/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/edwarddorta/dev/portfolio/haro-connects/client/src/components/PostUpdate.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/src/components/PostUpdate.vue","mtime":1626700633864},{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/vue-loader-v16/dist/index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9lZHdhcmRkb3J0YS9kZXYvcG9ydGZvbGlvL2hhcm8tY29ubmVjdHMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgcmVmLCBvbk1vdW50ZWQgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZSwgdXNlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgY29udGVudFJlZiA9IHJlZignJyk7CiAgICB2YXIgcm91dGUgPSB1c2VSb3V0ZSgpOwogICAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwoKICAgIHZhciBnZXRQb3N0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoaWQpIHsKICAgICAgICB2YXIgdXJsLCByZXNwb25zZSwganNvbjsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBpZiAoIWxvY2FsU3RvcmFnZS50b2trZW4pIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB1cmwgPSAiIi5jb25jYXQocHJvY2Vzcy5lbnYuVlVFX0FQUF9CQVNFX0FQSVVSTCwgIi9hcGkvdjEvcG9zdHMvIikuY29uY2F0KGlkKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVybCk7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCh1cmwsIHsKICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246ICJCZWFyZXIgIi5jb25jYXQobG9jYWxTdG9yYWdlLnRva2tlbikKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAganNvbiA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb250ZW50UmVmLnZhbHVlID0ganNvbi5kYXRhLmNvbnRlbnQ7CgogICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwoKICAgICAgcmV0dXJuIGZ1bmN0aW9uIGdldFBvc3QoX3gpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHZhciB1cGRhdGVQb3N0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgICB2YXIgdXJsLCByZXNwb25zZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgaWYgKCFsb2NhbFN0b3JhZ2UudG9ra2VuKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNvbnRlbnRSZWYudmFsdWUpOwogICAgICAgICAgICAgICAgdXJsID0gIiIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9BUElVUkwsICIvYXBpL3YxL3Bvc3RzL3VwZGF0ZS8iKS5jb25jYXQocm91dGUucGFyYW1zLnBvc3RJZCk7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDU7CiAgICAgICAgICAgICAgICByZXR1cm4gZmV0Y2godXJsLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsCiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIuY29uY2F0KGxvY2FsU3RvcmFnZS50b2trZW4pLAogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoewogICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGNvbnRlbnRSZWYudmFsdWUKICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgX2NvbnRleHQyLnQwID0gY29uc29sZTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0Mi5zZW50OwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi50MC5sb2cuY2FsbChfY29udGV4dDIudDAsIF9jb250ZXh0Mi50MSk7CgogICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlUG9zdCgpIHsKICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICBvbk1vdW50ZWQoZnVuY3Rpb24gKCkgewogICAgICBnZXRQb3N0KHJvdXRlLnBhcmFtcy5wb3N0SWQpOwogICAgfSk7CiAgICByZXR1cm4gewogICAgICBjb250ZW50UmVmOiBjb250ZW50UmVmLAogICAgICB1cGRhdGVQb3N0OiB1cGRhdGVQb3N0CiAgICB9OwogIH0KfTs="},{"version":3,"sources":["/Users/edwarddorta/dev/portfolio/haro-connects/client/src/components/PostUpdate.vue"],"names":[],"mappings":";;;;AAiBA,SAAS,GAAT,EAAc,SAAd,QAA+B,KAA/B;AACA,SAAS,QAAT,EAAmB,SAAnB,QAAoC,YAApC;AAEA,eAAe;AACb,EAAA,KADa,mBACL;AACN,QAAM,UAAS,GAAI,GAAG,CAAC,EAAD,CAAtB;AACA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;;AACA,QAAM,OAAM;AAAA,yEAAI,iBAAO,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACV,YAAY,CAAC,MADH;AAAA;AAAA;AAAA;;AAEN,gBAAA,GAFM,aAEG,OAAO,CAAC,GAAR,CAAY,mBAFf,2BAEmD,EAFnD;AAGZ,gBAAA,OAAO,CAAC,GAAR,CAAY,GAAZ;AAHY;AAAA,uBAIW,KAAK,CAAC,GAAD,EAAM;AAChC,kBAAA,OAAO,EAAE;AACP,oBAAA,aAAa,mBAAY,YAAY,CAAC,MAAzB;AADN;AADuB,iBAAN,CAJhB;;AAAA;AAIN,gBAAA,QAJM;AAAA;AAAA,uBASO,QAAQ,CAAC,IAAT,EATP;;AAAA;AASN,gBAAA,IATM;AAUZ,gBAAA,UAAU,CAAC,KAAX,GAAmB,IAAI,CAAC,IAAL,CAAU,OAA7B;;AAVY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAN,OAAM;AAAA;AAAA;AAAA,OAAZ;;AAaA,QAAM,UAAS;AAAA,0EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBACb,YAAY,CAAC,MADA;AAAA;AAAA;AAAA;;AAEf,gBAAA,OAAO,CAAC,GAAR,CAAY,UAAU,CAAC,KAAvB;AACM,gBAAA,GAHS,aAGA,OAAO,CAAC,GAAR,CAAY,mBAHZ,kCAGuD,KAAK,CAAC,MAAN,CAAa,MAHpE;AAAA;AAAA,uBAIQ,KAAK,CAAC,GAAD,EAAM;AAChC,kBAAA,MAAM,EAAE,KADwB;AAEhC,kBAAA,OAAO,EAAE;AACP,oBAAA,aAAa,mBAAY,YAAY,CAAC,MAAzB,CADN;AAEP,oCAAgB;AAFT,mBAFuB;AAMhC,kBAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CAAe;AACnB,oBAAA,OAAO,EAAE,UAAU,CAAC;AADD,mBAAf;AAN0B,iBAAN,CAJb;;AAAA;AAIT,gBAAA,QAJS;AAAA,+BAcf,OAde;AAAA;AAAA,uBAcG,QAAQ,CAAC,IAAT,EAdH;;AAAA;AAAA;;AAAA,6BAcP,GAdO;;AAef,oBAAI,QAAQ,CAAC,EAAb,EAAiB;AACf,kBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,oBAAA,IAAI,EAAE;AAAR,mBAAZ;AACF;;AAjBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAT,UAAS;AAAA;AAAA;AAAA,OAAf;;AAqBA,IAAA,SAAS,CAAC,YAAM;AACd,MAAA,OAAO,CAAC,KAAK,CAAC,MAAN,CAAa,MAAd,CAAP;AACD,KAFQ,CAAT;AAGA,WAAO;AACL,MAAA,UAAU,EAAV,UADK;AAEL,MAAA,UAAU,EAAV;AAFK,KAAP;AAID;AA9CY,CAAf","sourcesContent":["<template>\n  <form class='container'>\n    <div class=\"form-group my-1\">\n      <label class='my-4'>Content</label>\n      <textarea\n      v-model=\"contentRef\"\n      type=\"text\"\n      class=\"form-control\"/>\n    </div>\n    <button\n      type=\"button\"\n      @click='updatePost'\n      class=\"btn btn-primary my-1\">Submit Update</button>\n  </form>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue';\nimport { useRoute, useRouter } from 'vue-router';\n\nexport default {\n  setup() {\n    const contentRef = ref('');\n    const route = useRoute();\n    const router = useRouter();\n    const getPost = async (id) => {\n      if (localStorage.tokken) {\n        const url = `${process.env.VUE_APP_BASE_APIURL}/api/v1/posts/${id}`;\n        console.log(url);\n        const response = await fetch(url, {\n          headers: {\n            Authorization: `Bearer ${localStorage.tokken}`,\n          },\n        });\n        const json = await response.json();\n        contentRef.value = json.data.content;\n      }\n    };\n    const updatePost = async () => {\n      if (localStorage.tokken) {\n        console.log(contentRef.value);\n        const url = `${process.env.VUE_APP_BASE_APIURL}/api/v1/posts/update/${route.params.postId}`;\n        const response = await fetch(url, {\n          method: 'PUT',\n          headers: {\n            Authorization: `Bearer ${localStorage.tokken}`,\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            content: contentRef.value,\n          }),\n        });\n        console.log(await response.json());\n        if (response.ok) {\n          router.push({ name: 'Home' });\n        }\n      }\n    };\n\n    onMounted(() => {\n      getPost(route.params.postId);\n    });\n    return {\n      contentRef,\n      updatePost,\n    };\n  },\n};\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}]}