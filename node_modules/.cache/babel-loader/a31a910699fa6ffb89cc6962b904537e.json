{"remainingRequest":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/babel-loader/lib/index.js!/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/edwarddorta/dev/portfolio/haro-connects/client/src/components/Login.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/src/components/Login.vue","mtime":1626278509610},{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/edwarddorta/dev/portfolio/haro-connects/client/node_modules/vue-loader-v16/dist/index.js","mtime":1624994108000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9lZHdhcmRkb3J0YS9kZXYvcG9ydGZvbGlvL2hhcm8tY29ubmVjdHMvY2xpZW50L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgcmVmLCBjb21wdXRlZCB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgeyB1c2VTdG9yZSB9IGZyb20gJ3Z1ZXgnOwpleHBvcnQgZGVmYXVsdCB7CiAgc2V0dXA6IGZ1bmN0aW9uIHNldHVwKCkgewogICAgdmFyIHVzZXJuYW1lID0gcmVmKCcnKTsKICAgIHZhciBwYXNzd29yZCA9IHJlZignJyk7CiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgc3RvcmUgPSB1c2VTdG9yZSgpOwogICAgdmFyIHVzZXJEYXRhID0gY29tcHV0ZWQoZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RvcmUuc3RhdGUudXNlckRhdGE7CiAgICB9KTsKCiAgICB2YXIgbG9nSW5SZXEgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgbG9naW5VcmwsIHJlc3BvbnNlLCBfeWllbGQkcmVzcG9uc2UkanNvbiwgdG9ra2VuOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBsb2dpblVybCA9ICIiLmNvbmNhdChwcm9jZXNzLmVudi5WVUVfQVBQX0JBU0VfQVBJVVJMLCAiL2F1dGgvbG9naW4iKTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKGxvZ2luVXJsLCB7CiAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJwogICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7CiAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZC52YWx1ZQogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgX3lpZWxkJHJlc3BvbnNlJGpzb24gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgdG9ra2VuID0gX3lpZWxkJHJlc3BvbnNlJGpzb24udG9ra2VuOwoKICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5vaykgewogICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2UudG9ra2VuID0gdG9ra2VuOwogICAgICAgICAgICAgICAgICBzdG9yZS5zdGF0ZS5sb2dnZWRJbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgICBuYW1lOiAnSG9tZScKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gbG9nSW5SZXEoKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICByZXR1cm4gewogICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgbG9nSW5SZXE6IGxvZ0luUmVxLAogICAgICB1c2VyRGF0YTogdXNlckRhdGEKICAgIH07CiAgfQp9Ow=="},{"version":3,"sources":["/Users/edwarddorta/dev/portfolio/haro-connects/client/src/components/Login.vue"],"names":[],"mappings":";;;AA6BA,SAAS,GAAT,EAAc,QAAd,QAA8B,KAA9B;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,SAAS,QAAT,QAAyB,MAAzB;AAEA,eAAe;AACb,EAAA,KADa,mBACL;AACN,QAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;AACA,QAAM,QAAO,GAAI,GAAG,CAAC,EAAD,CAApB;AACA,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,KAAI,GAAI,QAAQ,EAAtB;AACA,QAAM,QAAO,GAAI,QAAQ,CAAC;AAAA,aAAM,KAAK,CAAC,KAAN,CAAY,QAAlB;AAAA,KAAD,CAAzB;;AAEA,QAAM,QAAO;AAAA,yEAAI;AAAA;;AAAA;AAAA;AAAA;AAAA;AACT,gBAAA,QADS,aACK,OAAO,CAAC,GAAR,CAAY,mBADjB;AAAA;AAAA,uBAEQ,KAAK,CAAC,QAAD,EAAW;AACrC,kBAAA,MAAM,EAAE,MAD6B;AAErC,kBAAA,OAAO,EAAE;AACP,oCAAgB;AADT,mBAF4B;AAKrC,kBAAA,IAAI,EAAE,IAAI,CAAC,SAAL,CAAe;AACnB,oBAAA,QAAQ,EAAE,QAAQ,CAAC,KADA;AAEnB,oBAAA,QAAQ,EAAE,QAAQ,CAAC;AAFA,mBAAf;AAL+B,iBAAX,CAFb;;AAAA;AAET,gBAAA,QAFS;AAAA;AAAA,uBAYU,QAAQ,CAAC,IAAT,EAZV;;AAAA;AAAA;AAYP,gBAAA,MAZO,wBAYP,MAZO;;AAaf,oBAAI,QAAQ,CAAC,EAAb,EAAiB;AACf,kBAAA,YAAY,CAAC,MAAb,GAAsB,MAAtB;AACA,kBAAA,KAAK,CAAC,KAAN,CAAY,QAAZ,GAAuB,IAAvB;AACA,kBAAA,MAAM,CAAC,IAAP,CAAY;AAAE,oBAAA,IAAI,EAAE;AAAR,mBAAZ;AACF;;AAjBe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAP,QAAO;AAAA;AAAA;AAAA,OAAb;;AAoBA,WAAO;AACL,MAAA,QAAQ,EAAR,QADK;AAEL,MAAA,QAAQ,EAAR,QAFK;AAGL,MAAA,QAAQ,EAAR,QAHK;AAIL,MAAA,QAAQ,EAAR;AAJK,KAAP;AAMD;AAlCY,CAAf","sourcesContent":["<template>\n  <div class=\"user-form-container\">\n    <div class='log-in-container'>\n      <form @submit.prevent=\"logInReq\" class='user-form'>\n      <div class=\"form-group\">\n        <label for=\"exampleInputEmail1\">Username</label>\n        <input\n        v-model='username'\n        type=\"username\"\n        class=\"form-control\"\n        placeholder=\"Enter Username\">\n      </div>\n      <div class=\"form-group\">\n        <label for=\"exampleInputPassword1\">\n          Password\n        </label>\n        <input\n        v-model=\"password\"\n        type=\"password\"\n        class=\"form-control\"\n        placeholder=\"Password\">\n      </div>\n      <button type=\"submit\" class=\"btn btn-primary\">Submit</button>\n    </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, computed } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { useStore } from 'vuex';\n\nexport default {\n  setup() {\n    const username = ref('');\n    const password = ref('');\n    const router = useRouter();\n    const store = useStore();\n    const userData = computed(() => store.state.userData);\n\n    const logInReq = async () => {\n      const loginUrl = `${process.env.VUE_APP_BASE_APIURL}/auth/login`;\n      const response = await fetch(loginUrl, {\n        method: 'POST',\n        headers: {\n          'content-type': 'application/json',\n        },\n        body: JSON.stringify({\n          username: username.value,\n          password: password.value,\n        }),\n      });\n      const { tokken } = await response.json();\n      if (response.ok) {\n        localStorage.tokken = tokken;\n        store.state.loggedIn = true;\n        router.push({ name: 'Home' });\n      }\n    };\n\n    return {\n      username,\n      password,\n      logInReq,\n      userData,\n    };\n  },\n};\n</script>\n<style lang='scss'>\n.user-form-container{\n  margin: 0 auto;\n  width: 40vw;\n}\n.form-group{\n  margin:1rem 0;\n}\n.user-form{\n  margin:3.5rem 0;\n}\n</style>\n"],"sourceRoot":""}]}